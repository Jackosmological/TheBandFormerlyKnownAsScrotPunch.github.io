<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CRT TV</title>
<link rel="stylesheet" href="styles.css"/>
</head>

<body>

<div class="tv" id="tv">

  <img class="tv-screen" src="screen.png">

  <div class="tv-static"></div>

  <video class="tv-video" id="video" loop>
    <source src="band.mp4" type="video/mp4">
  </video>

  <button class="play-btn" id="playBtn"></button>

  <img class="tv-frame" src="tv.png">

</div>

<audio id="staticAudio" loop>
  <source src="static.mp3" type="audio/mpeg">
</audio>

<script>
const tv = document.getElementById("tv");
const video = document.getElementById("video");
const btn = document.getElementById("playBtn");
const staticAudio = document.getElementById("staticAudio");

let videoMode = false;

/* STARTUP */
window.onload = ()=>{
  tv.classList.add("startup");

  setTimeout(()=>{
    tv.classList.remove("startup");
    tv.classList.add("static-on");

    staticAudio.volume = 0.6;
    staticAudio.play().catch(()=>{});
  },1200);
};

/* PLAY BUTTON */
btn.onclick = async ()=>{

  if(!videoMode){
    videoMode = true;

    tv.classList.remove("static-on");
    tv.classList.add("video-on");

    staticAudio.pause();

    await video.play();
  }
  else{
    if(video.paused){
      video.play();
    }else{
      video.pause();
    }
  }
};
</script>

</body>
</html>
