<!-- index.html â€” FULL copy/paste -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CRT TV</title>
<link rel="stylesheet" href="styles.css"/>
</head>

<body>

<div class="tv" id="tv">

  <img class="tv-screen" src="screen.png" alt="">

  <div class="tv-static"></div>

  <video class="tv-video" id="video" loop playsinline preload="metadata">
    <source src="band.mp4" type="video/mp4">
  </video>

  <button class="play-btn" id="playBtn" aria-label="Play/Pause"></button>

  <img class="tv-frame" src="tv.png" alt="">

</div>

<audio id="staticAudio" loop preload="auto">
  <source src="static.mp3" type="audio/mpeg">
</audio>

<script>
const tv = document.getElementById("tv");
const video = document.getElementById("video");
const btn = document.getElementById("playBtn");
const staticAudio = document.getElementById("staticAudio");

let videoMode = false;

/* Start static visuals immediately */
tv.classList.add("static-on");

/* Try to start static audio as soon as possible.
   NOTE: many browsers block autoplay audio until user interacts. */
function startStaticAudio(){
  staticAudio.volume = 0.6;
  staticAudio.play().catch(()=>{ /* autoplay may be blocked */ });
}
window.addEventListener("load", startStaticAudio);

/* Button: first click starts video (and stops static), later clicks pause/play video */
btn.onclick = async ()=>{
  if(!videoMode){
    videoMode = true;

    // stop static
    tv.classList.remove("static-on");
    tv.classList.add("video-on");
    staticAudio.pause();
    staticAudio.currentTime = 0;

    try{ await video.play(); }catch(e){}
    return;
  }

  // toggle pause/play
  if(video.paused){
    try{ await video.play(); }catch(e){}
  }else{
    video.pause();
  }
};
</script>

</body>
</html>
